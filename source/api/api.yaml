openapi: 3.0.0
info:
  title: Pegasus API
  version: "1.0"
  description: API to fetch personal information
  contact:
    name: Sai Kiran
    email: saikiranreddy.saikiran@gmail.com

servers:
  - url: 'https://localhost:8080'
    description: Localhost Base URL for the API
  - url: 'https://walrus-app-lrhok.ondigitalocean.app'
    description: Deployed Base URL for the API

tags:
  - name: steam
    description: Steam endpoints
  - name: standard
    description: Standard Routes
  - name: image
    description: Images

paths:
  /steam/{id}/summary:
    summary: Steam player Summary
    get:
      operationId: steam-player-summary
      description: Fetch steam player summary
      tags: [steam]
      parameters:
        - name: id
          in: path
          description: Steam player id
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 64
        - name: RateLimit-Limit
          in: header
          description: Total number of tries possible
          required: true
          schema:
            type: number
            minimum: 1
            maximum: 50
        - name: RateLimit-Remaining
          in: header
          description: Remaining number of tries possible
          required: true
          schema:
            type: number
            minimum: 0
            maximum: 50
        - name: RateLimit-Reset
          in: header
          description: Time in seconds before rate limiting resets
          required: true
          schema:
            type: number
            minimum: 0
            maximum: 3600
      responses:
        '200':
          description: Player summary retrieved successfully
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/steamSummary'
        '400':
          description: Bad Request
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: bad request
        '404':
          description: not found
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: not found

        '500':
          description: server unavailable
          content:
            application/json:
              schema:
                type: string
                example: Unable to Handle Request

        '429':
          description: Rate Limiting
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: 'You have exceeded number of requests, Try again later!'

  /steam/{id}/recently-played:
    summary: Steam Recently Played
    get:
      operationId: steam-recently-played
      description: Fetch steam recently played
      tags: [steam]
      parameters:
        - name: id
          in: path
          description: Steam player id
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 64
      responses:
        '200':
          description: Player recent played retrieved successfully
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/steamRecentlyPlayed'
        '400':
          description: Bad Request
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: bad request
        '404':
          description: user not found
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: not found

        '500':
          description: server unavailable
          content:
            application/json:
              schema:
                type: string
                example: Unable to Handle Request

        '429':
          description: Rate Limiting
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: 'You have exceeded number of requests, Try again later!'

  /steam/{id}/summary/svg:
    summary: Steam Recently Played SVG
    get:
      operationId: steam-summary-svg
      description: Fetch steam recently played
      tags: [steam]
      parameters:
        - name: id
          in: path
          description: Steam player id
          required: true
          schema:
            type: string
            minLength: 1
            maxLength: 64
      responses:
        '200':
          description: Player recent played retrieved successfully
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            image/svg+xml:
              schema:
                type: string
                format: binary
        '400':
          description: Bad Request
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: bad request

        '404':
          description: not found
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: not found

        '500':
          description: server unavailable
          content:
            application/json:
              schema:
                type: string
                example: Unable to Handle Request

        '429':
          description: Rate Limiting
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: 'You have exceeded number of requests, Try again later!'

  /catto:
    summary: Random Cat Images
    get:
      operationId: get-cat-images
      description: Fetch Cat Images
      tags: [image]
      responses:
        '200':
          description: Cat image retrieved successfully
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            image/jpeg:
              schema:
                type: string
                format: binary

        '400':
          description: Bad Request
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: bad request

        '500':
          description: server unavailable
          content:
            application/json:
              schema:
                type: string
                example: Unable to Handle Request

        '429':
          description: Rate Limiting
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: 'You have exceeded number of requests, Try again later!'

  /doggo:
    summary: Random Dog Images
    get:
      operationId: get-dog-images
      description: Fetch Dog Images
      tags: [image]
      responses:
        '200':
          description: Dog image retrieved successfully
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            image/jpeg:
              schema:
                type: string
                format: binary

        '400':
          description: Bad Request
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: bad request

        '500':
          description: server unavailable
          content:
            application/json:
              schema:
                type: string
                example: Unable to Handle Request

        '429':
          description: Rate Limiting
          headers:
            RateLimit-Limit:
              $ref: '#/components/headers/RateLimit-Limit'
            RateLimit-Remaining:
              $ref: '#/components/headers/RateLimit-Remaining'
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: 'You have exceeded number of requests, Try again later!'

  /health:
    summary: API health
    get:
      operationId: health
      tags: [standard]
      description: Get health status
      responses:
        '200':
          description: health status retrieved
          headers:
            RateLimit-Limit:
              description: Total number of tries possible
              required: true
              schema:
                type: number
                minimum: 1
                maximum: 1000
            RateLimit-Remaining:
              description: Remaining number of tries possible
              required: true
              schema:
                type: number
                minimum: 0
                maximum: 1000
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                enum: ['up', 'down']

        '400':
          description: Bad Request
          headers:
            RateLimit-Limit:
              description: Total number of tries possible
              required: true
              schema:
                type: number
                minimum: 1
                maximum: 1000
            RateLimit-Remaining:
              description: Remaining number of tries possible
              required: true
              schema:
                type: number
                minimum: 0
                maximum: 1000
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: bad request

        '429':
          description: Rate Limiting
          headers:
            RateLimit-Limit:
              description: Total number of tries possible
              required: true
              schema:
                type: number
                minimum: 1
                maximum: 1000
            RateLimit-Remaining:
              description: Remaining number of tries possible
              required: true
              schema:
                type: number
                minimum: 0
                maximum: 1000
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: 'You have exceeded number of requests, Try again later!'

        '500':
          description: server unavailable
          content:
            application/json:
              schema:
                type: string
                example: Unable to Handle Request

  /version:
    summary: API health
    get:
      operationId: version
      tags: [standard]
      description: Get version
      responses:
        '200':
          description: version retrieved
          headers:
            RateLimit-Limit:
              description: Total number of tries possible
              required: true
              schema:
                type: number
                minimum: 1
                maximum: 1000
            RateLimit-Remaining:
              description: Remaining number of tries possible
              required: true
              schema:
                type: number
                minimum: 0
                maximum: 1000
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                pattern: ^[0-9]+\.[0-9]+\.[0-9]+$
                example: 1.0.0

        '400':
          description: Bad Request
          headers:
            RateLimit-Limit:
              description: Total number of tries possible
              required: true
              schema:
                type: number
                minimum: 1
                maximum: 1000
            RateLimit-Remaining:
              description: Remaining number of tries possible
              required: true
              schema:
                type: number
                minimum: 0
                maximum: 1000
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: bad request

        '429':
          description: Rate Limiting
          headers:
            RateLimit-Limit:
              description: Total number of tries possible
              required: true
              schema:
                type: number
                minimum: 1
                maximum: 1000
            RateLimit-Remaining:
              description: Remaining number of tries possible
              required: true
              schema:
                type: number
                minimum: 0
                maximum: 1000
            RateLimit-Reset:
              $ref: '#/components/headers/RateLimit-Reset'
            Retry-After:
              $ref: '#/components/headers/RateLimit-Reset'
          content:
            application/json:
              schema:
                type: string
                example: 'You have exceeded number of requests, Try again later!'

        '500':
          description: server unavailable
          content:
            application/json:
              schema:
                type: string
                example: Unable to Handle Request

components:
  headers:
    RateLimit-Limit:
      description: Total number of tries possible
      required: true
      schema:
        type: number
        minimum: 1
        maximum: 50
    RateLimit-Remaining:
      description: Remaining number of tries possible
      required: true
      schema:
        type: number
        minimum: 0
        maximum: 50
    RateLimit-Reset:
      description: Time in seconds before rate limiting resets
      required: true
      schema:
        type: number
        minimum: 0
        maximum: 3600
  schemas:
    steamSummary:
      type: object
      properties:
          data:
            type: object
            properties:
              response:
                type: object
                properties:
                  players:
                    type: array
                    items:
                      type: object
                      properties:
                        steamid: 
                          type: string
                          minLength: 0
                          maxLength: 63
                        communityvisibilitystate:
                          type: number
                          minimum: 0
                          maximum: 9
                        profilestate:
                          type: number
                          minimum: 0
                          maximum: 9
                        personname:
                          type: string
                          minLength: 1
                          maxLength: 100
                        profileurl:
                          type: string
                          format: url
                        avatar:
                          type: string
                          format: url
                        avatarmedium:
                          type: string
                          format: url
                        avatarfull:
                          type: string
                          format: url
                        avatarhash:
                          type: string
                          minLength: 1
                          maxLength: 100
                        lastlogoff:
                          type: number
                          minimum: 0
                          maximum: 9999999999999999
                        personastate:
                          type: number
                          minimum: 0
                          maximum: 9
                        primaryclanid:
                          type: string
                          minLength: 0
                          maxLength: 999
                        timecreated:
                          type: number
                          minimum: 0
                          maximum: 9999999999999999
                        personastateflag:
                          type: number
                          minimum: 0
                          maximum: 9
    
    steamRecentlyPlayed:
      type: object
      properties:
        data:
          type: object
          properties:
            responses:
              type: object
              properties:
                total_count:
                  type: number
                  minimum: 0
                  maximum: 100
                games:
                  type: array
                  minItems: 0
                  maxItems: 100
                  items:
                    type: object
                    properties:
                      appid:
                        type: number
                        minimum: 0
                        maximum: 99999999999999999999
                      name:
                        type: string
                        minLength: 1
                        maxLength: 9999999999
                      playtime_2weeks:
                        type: number
                        minimum: 0
                        maximum: 9999999
                      playtime_forever:
                        type: number
                        minimum: 0
                        maximum: 999999999999999999
                      img_icon_url:
                        type: string
                        minLength: 1
                        maxLength: 999999
                      playtime_windows_forever:
                        type: number
                        minimum: 0
                        maximum: 999999999999999999
                      playtime_mac_forever:
                        type: number
                        minimum: 0
                        maximum: 999999999999999999
                      playtime_linux_forever:
                        type: number
                        minimum: 0
                        maximum: 999999999999999999
